import java.util.Scanner;

class RPNCalculator {
    private int[] stack;
    private int top;
    private int capacity;

    public RPNCalculator(int size) {
        stack = new int[size];
        capacity = size;
        top = -1;
    }

    public void push(int value) {
        if (isFull()) {
            System.out.println("Ошибка: Стек переполнен");
            return;
        }
        stack[++top] = value;
    }

    public int pop() {
        if (isEmpty()) {
            System.out.println("Ошибка: Стек пуст");
            return Integer.MIN_VALUE;
        }
        return stack[top--];
    }

    public boolean isEmpty() {
        return top == -1;
    }

    public boolean isFull() {
        return top == capacity - 1;
    }

    public int peek() {
        if (isEmpty()) {
            System.out.println("Стек пуст");
            return Integer.MIN_VALUE;
        }
        return stack[top];
    }

    public void processExpression(String expression) {
        String[] tokens = expression.split(" ");
        for (String token : tokens) {
            if (token.matches("-?\\d+")) {
                push(Integer.parseInt(token));
            } else {
                int b = pop();
                int a = pop();
                if (a == Integer.MIN_VALUE || b == Integer.MIN_VALUE) {
                    System.out.println("Ошибка: недостаточно операндов для операции " + token);
                    return;
                }
                switch (token) {
                    case "+":
                        push(a + b);
                        break;
                    case "-":
                        push(a - b);
                        break;
                    case "*":
                        push(a * b);
                        break;
                    case "/":
                        if (b == 0) {
                            System.out.println("Ошибка: деление на ноль");
                            return;
                        }
                        push(a / b);
                        break;
                    default:
                        System.out.println("Неизвестная операция: " + token);
                        return;
                }
            }
        }
        if (top == 0) {
            System.out.println("Результат: " + pop());
        } else {
            System.out.println("Ошибка: некорректное выражение");
        }
    }

    public static void main(String[] args) {
        RPNCalculator calc = new RPNCalculator(100);
        Scanner scanner = new Scanner(System.in);

        System.out.println("Введите выражение в обратной польской нотации (например: 2 3 + 4 *):");
        String expr = scanner.nextLine();

        calc.processExpression(expr);
        scanner.close();
    }
}
